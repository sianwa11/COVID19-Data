const e={globalCases:[],kenyanCases:[],search:{query:"",result:[]},history:{cases:null,deaths:null,recovered:null}};var t=new class{_data;_parentElement=document.querySelector(".global_data");renderGlobalData(e){if(!e)return;this._data=e;const t=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",t)}renderSpinner(){this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",'<div class="loader"></div>')}_clear(){this._parentElement.innerHTML=""}_generateMarkup(){return`\n        ${this._data.map((e=>`\n            <h5 class="card-title">Global Data 🌍</h5>\n\n            <h4 class="card-text text-warning">\n              <b>${e.cases}</b> <small>Confirmed cases</small> ✔\n            </h4>\n\n            <h4 class="card-text text-primary">\n              <b>${e.recovered}</b> <small>Recovered</small> ❤\n            </h4>\n\n            <h4 class="card-text text-danger">\n              <b>${e.deaths}</b> <small>Deaths</small> 🕊\n            </h4>\n            `)).join("")}\n      `}};var a=new class{_data;_parentElement=document.querySelector(".kenyan_data");render(e){if(!e)return;this._data=e;const t=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",t)}renderSpinner(){this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",'<div class="loader"></div>')}_clear(){this._parentElement.innerHTML=""}_generateMarkup(){return`\n      ${this._data.map((e=>`\n        <h5 class="card-title">Kenya <img src="${e.countryInfo.flag}" /></h5>\n\n        <h4 class="card-text text-warning">\n            <b>${e.cases}</b> <small>Confirmed cases</small> ✔\n        </h4>\n\n        <h4 class="card-text text-primary">\n            <b>${e.recovered}</b> <small>Recovered</small> ❤\n        </h4>\n\n        <h4 class="card-text text-danger">\n            <b>${e.deaths}</b> <small>Deaths</small> 🕊\n        </h4>\n        `)).join("")}\n      `}};var n=new class{_parentElement=document.querySelector(".search_form");_searchField=this._parentElement.querySelector(".search_field");getQuery(){const e=this._searchField.value;return this._clear(),e}_clear(){this._searchField.value=""}addHandlerSearch(e){this._parentElement.addEventListener("submit",(t=>{t.preventDefault(),e()}))}};var r=new class{_data;_parentElement=document.querySelector(".search_results");render(e){if(!e)return;this._data=e;const t=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",t)}renderSpinner(){this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",'<div class="loader"></div>')}renderError(){this._clear(),this._parentElement.insertAdjacentHTML("afterbegin","<p> Country not found 🚩</p>")}_clear(){this._parentElement.innerHTML=""}_generateMarkup(){return`${this._data.map((e=>`\n        <p class="card-title">${e.country} <img src="${e.countryInfo.flag}"></p>\n        <div class="row">\n            <div class="col-3 text-warning">\n                <b>${e.cases}</b> <small>Confirmed</small> ✔\n            </div>\n            <div class="col-3 text-primary">\n                <b>${e.recovered}</b> <small>Recovered</small> ❤\n            </div>\n            <div class="col-3 text-danger">\n                <b>${e.deaths}</b> <small>Deaths</small> 🕊\n            </div>\n        </div>\n      `)).join("")}`}};var s=new class{_data=[];_ctx=[document.getElementById("casesChart").getContext("2d"),document.getElementById("deathChart").getContext("2d"),document.getElementById("recoveredChart").getContext("2d")];render(e,t,a){e&&t&&a&&(this._data[0]=e,this._data[1]=t,this._data[2]=a,this._generateMarkup(),console.log(this._data))}_colorGen(){Math.floor(256*Math.random())}_generateMarkup(){for(let e=0;e<this._data.length;e++){new Chart(this._ctx[e],{type:"doughnut",data:{labels:["2020","2021"],datasets:[{label:"Years",data:[this._data[e].twentytwenty,this._data[e].twentyone],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]}})}}};const l=async function(){a.renderSpinner(),await async function(){try{const t=await fetch("https://disease.sh/v3/covid-19/countries/Kenya"),a=await t.json();if(!t.ok)throw new Error(`${t.status}`);return e.kenyanCases.push(a),e.kenyanCases}catch(e){throw console.log(e),e}}(),a.render(e.kenyanCases)},c=async function(){try{const t=n.getQuery();if(""===t)return void alert("Input country");r.renderSpinner(),await async function(t){try{e.search.query=t;const a=await fetch(`https://disease.sh/v3/covid-19/countries/${t}`),n=await a.json();if(!a.ok)throw new Error(`${a.status}`);return e.search.result.push(n),e.search.result}catch(e){throw console.log(e),e}}(t),r.render(e.search.result)}catch(e){r.renderError(),console.log(`${e}`)}},o=async function(){try{const t=await async function(){try{const t=await fetch("https://disease.sh/v3/covid-19/historical/all?lastdays=all"),a=await t.json();if(!t.ok)throw new Error(`${t.status}`);return e.history.cases=a.cases,e.history.deaths=a.deaths,e.history.recovered=a.recovered,e.history}catch(e){throw console.log(e),e}}(),a=i(t.cases),n=i(t.deaths),r=i(t.recovered);s.render(a,n,r)}catch(e){console.log(`${e}`)}},i=function(e){let t=0,a=0;const n={twentytwenty:null,twentyone:null};for(const[n,r]of Object.entries(e))n.endsWith("21")&&(t+=r),n.endsWith("20")&&(a+=r);return n.twentytwenty=t,n.twentyone=a,n};(async function(){try{t.renderSpinner(),await async function(){try{const t=await fetch("https://disease.sh/v3/covid-19/all"),a=await t.json();if(!t.ok)throw new Error(`${t.status}`);return e.globalCases.push(a),e.globalCases}catch(e){throw console.log(e),e}}(),t.renderGlobalData(e.globalCases)}catch(e){console.error(`${e}`)}})(),l(),n.addHandlerSearch(c),o();
//# sourceMappingURL=index.481f1f14.js.map
