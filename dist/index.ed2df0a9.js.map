{"mappings":"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","sources":["./node_modules/@parcel/runtime-browser-hmr/lib/HMRRuntime.js","./js/model.js","./js/views/GlobalDataView.js","./js/views/KenyanDataView.js","./js/views/SearchView.js","./js/views/SearchResultsView.js","./js/views/ChartView.js","./js/controller.js"],"sourcesContent":[null,"import {\r\n  API_COUNTRIES,\r\n  API_HISTORY,\r\n  API_GLOBAL_CASES,\r\n  MAIN_COUNTRY,\r\n} from \"./config.js\";\r\n\r\nexport const state = {\r\n  globalCases: [],\r\n  kenyanCases: [],\r\n  search: {\r\n    query: \"\",\r\n    result: [],\r\n  },\r\n  history: {\r\n    cases: null,\r\n    deaths: null,\r\n    recovered: null,\r\n  },\r\n};\r\n\r\n/**\r\n * Fetch global cases and push to state array\r\n * @returns array\r\n */\r\nexport const getGlobalCases = async function () {\r\n  try {\r\n    // Fetch covid cases from API\r\n    const res = await fetch(`${API_GLOBAL_CASES}`);\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) throw new Error(`${res.status}`);\r\n\r\n    state.globalCases.push(data);\r\n\r\n    return state.globalCases;\r\n  } catch (err) {\r\n    console.log(err);\r\n    throw err;\r\n  }\r\n};\r\n\r\n/**\r\n * Fetch Kenyan cases and push to state array\r\n * @returns array\r\n */\r\nexport const getKenyanCases = async function () {\r\n  try {\r\n    // Fetch Kenyan Cases\r\n    const res = await fetch(`${API_COUNTRIES}${MAIN_COUNTRY}`);\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) throw new Error(`${res.status}`);\r\n\r\n    state.kenyanCases.push(data);\r\n\r\n    return state.kenyanCases;\r\n  } catch (err) {\r\n    console.log(err);\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const searchCountryCase = async function (query) {\r\n  try {\r\n    // Get search query\r\n    state.search.query = query;\r\n\r\n    // Fetch searched cases\r\n    const res = await fetch(`${API_COUNTRIES}${query}`);\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) throw new Error(`${res.status}`);\r\n\r\n    state.search.result.push(data);\r\n\r\n    // console.log(res, data);\r\n    return state.search.result;\r\n  } catch (err) {\r\n    console.log(err);\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const getCOVIDHistory = async function () {\r\n  try {\r\n    const res = await fetch(`${API_HISTORY}`);\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) throw new Error(`${res.status}`);\r\n\r\n    state.history.cases = data.cases;\r\n    state.history.deaths = data.deaths;\r\n    state.history.recovered = data.recovered;\r\n\r\n    return state.history;\r\n  } catch (err) {\r\n    console.log(err);\r\n    throw err;\r\n  }\r\n};\r\n","class GlobalDataView {\r\n  _data;\r\n  _parentElement = document.querySelector(\".global_data\");\r\n\r\n  renderGlobalData(data) {\r\n    if (!data) return;\r\n\r\n    this._data = data;\r\n    const markup = this._generateMarkup();\r\n    this._clear();\r\n\r\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", markup);\r\n  }\r\n\r\n  renderSpinner() {\r\n    const spinner = `<div class=\"loader\"></div>`;\r\n    this._clear();\r\n\r\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", spinner);\r\n  }\r\n\r\n  _clear() {\r\n    // Clear the html\r\n    this._parentElement.innerHTML = \"\";\r\n  }\r\n\r\n  _generateMarkup() {\r\n    return `\r\n        ${this._data\r\n          .map((el) => {\r\n            return `\r\n            <h5 class=\"card-title\">Global Data 🌍</h5>\r\n\r\n            <h4 class=\"card-text text-warning\">\r\n              <b>${el.cases}</b> <small>Confirmed cases</small> ✔\r\n            </h4>\r\n\r\n            <h4 class=\"card-text text-primary\">\r\n              <b>${el.recovered}</b> <small>Recovered</small> ❤\r\n            </h4>\r\n\r\n            <h4 class=\"card-text text-danger\">\r\n              <b>${el.deaths}</b> <small>Deaths</small> 🕊\r\n            </h4>\r\n            `;\r\n          })\r\n          .join(\"\")}\r\n      `;\r\n  }\r\n}\r\n\r\nexport default new GlobalDataView();\r\n","class KenyanDataView {\r\n  _data;\r\n  _parentElement = document.querySelector(\".kenyan_data\");\r\n\r\n  render(data) {\r\n    if (!data) return;\r\n    this._data = data;\r\n    const markup = this._generateMarkup();\r\n    this._clear();\r\n\r\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", markup);\r\n  }\r\n\r\n  renderSpinner() {\r\n    const spinner = `<div class=\"loader\"></div>`;\r\n    this._clear();\r\n\r\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", spinner);\r\n  }\r\n\r\n  _clear() {\r\n    // Clear the html\r\n    this._parentElement.innerHTML = \"\";\r\n  }\r\n\r\n  _generateMarkup() {\r\n    return `\r\n      ${this._data\r\n        .map((el) => {\r\n          return `\r\n        <h5 class=\"card-title\">Kenya <img src=\"${el.countryInfo.flag}\" /></h5>\r\n\r\n        <h4 class=\"card-text text-warning\">\r\n            <b>${el.cases}</b> <small>Confirmed cases</small> ✔\r\n        </h4>\r\n\r\n        <h4 class=\"card-text text-primary\">\r\n            <b>${el.recovered}</b> <small>Recovered</small> ❤\r\n        </h4>\r\n\r\n        <h4 class=\"card-text text-danger\">\r\n            <b>${el.deaths}</b> <small>Deaths</small> 🕊\r\n        </h4>\r\n        `;\r\n        })\r\n        .join(\"\")}\r\n      `;\r\n  }\r\n}\r\n\r\nexport default new KenyanDataView();\r\n","class SearchView {\r\n  _parentElement = document.querySelector(\".search_form\");\r\n  _searchField = this._parentElement.querySelector(\".search_field\");\r\n\r\n  getQuery() {\r\n    const query = this._searchField.value;\r\n    this._clear();\r\n    return query;\r\n  }\r\n\r\n  _clear() {\r\n    this._searchField.value = \"\";\r\n  }\r\n\r\n  addHandlerSearch(handler) {\r\n    this._parentElement.addEventListener(\"submit\", (e) => {\r\n      e.preventDefault();\r\n\r\n      handler();\r\n    });\r\n  }\r\n}\r\n\r\nexport default new SearchView();\r\n","class SearchResultsView {\r\n  _data;\r\n  _parentElement = document.querySelector(\".search_results\");\r\n\r\n  render(data) {\r\n    if (!data) return;\r\n\r\n    this._data = data;\r\n    const markup = this._generateMarkup();\r\n    this._clear();\r\n\r\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", markup);\r\n  }\r\n\r\n  renderSpinner() {\r\n    const spinner = `<div class=\"loader\"></div>`;\r\n    this._clear();\r\n\r\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", spinner);\r\n  }\r\n\r\n  renderError() {\r\n    const error = `<p> Country not found 🚩</p>`;\r\n    this._clear();\r\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", error);\r\n  }\r\n\r\n  _clear() {\r\n    this._parentElement.innerHTML = \"\";\r\n  }\r\n\r\n  _generateMarkup() {\r\n    return `${this._data\r\n      .map((el) => {\r\n        return `\r\n        <p class=\"card-title\">${el.country} <img src=\"${el.countryInfo.flag}\"></p>\r\n        <div class=\"row\">\r\n            <div class=\"col-3 text-warning\">\r\n                <b>${el.cases}</b> <small>Confirmed</small> ✔\r\n            </div>\r\n            <div class=\"col-3 text-primary\">\r\n                <b>${el.recovered}</b> <small>Recovered</small> ❤\r\n            </div>\r\n            <div class=\"col-3 text-danger\">\r\n                <b>${el.deaths}</b> <small>Deaths</small> 🕊\r\n            </div>\r\n        </div>\r\n      `;\r\n      })\r\n      .join(\"\")}`;\r\n  }\r\n}\r\n\r\nexport default new SearchResultsView();\r\n","class ChartView {\r\n  _data = [];\r\n  _ctx = [\r\n    document.getElementById(\"casesChart\").getContext(\"2d\"),\r\n    document.getElementById(\"deathChart\").getContext(\"2d\"),\r\n    document.getElementById(\"recoveredChart\").getContext(\"2d\"),\r\n  ];\r\n\r\n  render(cases, deaths, recoveries) {\r\n    if (!cases || !deaths || !recoveries) return;\r\n    this._data[0] = cases;\r\n    this._data[1] = deaths;\r\n    this._data[2] = recoveries;\r\n    this._generateMarkup();\r\n    console.log(this._data);\r\n  }\r\n\r\n  _colorGen() {\r\n    Math.floor(Math.random() * 256);\r\n  }\r\n\r\n  _generateMarkup() {\r\n    for (let i = 0; i < this._data.length; i++) {\r\n      let myChart = new Chart(this._ctx[i], {\r\n        type: \"doughnut\",\r\n        data: {\r\n          labels: [\"2020\", \"2021\"],\r\n          datasets: [\r\n            {\r\n              label: \"Years\",\r\n              data: [this._data[i].twentytwenty, this._data[i].twentyone],\r\n              backgroundColor: [\r\n                \"rgba(255, 99, 132, 0.2)\",\r\n                \"rgba(54, 162, 235, 0.2)\",\r\n              ],\r\n              borderColor: [\"rgba(255, 99, 132, 1)\", \"rgba(54, 162, 235, 1)\"],\r\n              borderWidth: 1,\r\n            },\r\n          ],\r\n        },\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport default new ChartView();\r\n","import * as model from \"./model.js\";\r\n\r\nimport GlobalDataView from \"./views/GlobalDataView.js\";\r\nimport KenyanDataView from \"./views/KenyanDataView.js\";\r\nimport SearchView from \"./views/SearchView.js\";\r\nimport SearchResultsView from \"./views/SearchResultsView.js\";\r\nimport ChartView from \"./views/ChartView.js\";\r\n\r\nconst controlGlobalCases = async function () {\r\n  try {\r\n    // 1. Render Spinner\r\n    GlobalDataView.renderSpinner();\r\n\r\n    // 2. Get COVID-19 global cases\r\n    await model.getGlobalCases();\r\n\r\n    // 2. Render cases\r\n    GlobalDataView.renderGlobalData(model.state.globalCases);\r\n  } catch (err) {\r\n    console.error(`${err}`);\r\n  }\r\n};\r\n\r\nconst controlKenyanCases = async function () {\r\n  // 1. Render Spinner\r\n  KenyanDataView.renderSpinner();\r\n\r\n  // 2. Get Kenyan COVID-19 data\r\n  await model.getKenyanCases();\r\n\r\n  // 3. Render Kenyan cases\r\n  KenyanDataView.render(model.state.kenyanCases);\r\n};\r\n\r\nconst controlSearches = async function () {\r\n  try {\r\n    // 1. Get the inputed query\r\n    const query = SearchView.getQuery();\r\n\r\n    if (query === \"\") {\r\n      alert(\"Input country\");\r\n      return;\r\n    }\r\n\r\n    // 2. Render the spinner\r\n    SearchResultsView.renderSpinner();\r\n\r\n    // 3. Run the search query\r\n    await model.searchCountryCase(query);\r\n\r\n    // 4. Render Results\r\n    SearchResultsView.render(model.state.search.result);\r\n  } catch (err) {\r\n    SearchResultsView.renderError();\r\n    console.log(`${err}`);\r\n  }\r\n};\r\n\r\nconst controlCOVIDHistory = async function () {\r\n  try {\r\n    // 1. Get the data\r\n    const data = await model.getCOVIDHistory();\r\n    // console.log(data);\r\n\r\n    // 2. Calculate totals\r\n    const confirmedCases = calculateTotals(data.cases);\r\n    const confirmedDeaths = calculateTotals(data.deaths);\r\n    const confirmedRecoveries = calculateTotals(data.recovered);\r\n\r\n    // 3, Render the Chart\r\n    ChartView.render(confirmedCases, confirmedDeaths, confirmedRecoveries);\r\n  } catch (err) {\r\n    console.log(`${err}`);\r\n  }\r\n};\r\n\r\nconst calculateTotals = function (data) {\r\n  let secondYearTotals = 0;\r\n  let firstYearTotals = 0;\r\n  const chartData = {\r\n    twentytwenty: null,\r\n    twentyone: null,\r\n  };\r\n\r\n  for (const [key, value] of Object.entries(data)) {\r\n    if (key.endsWith(\"21\")) {\r\n      secondYearTotals += value;\r\n    }\r\n\r\n    if (key.endsWith(\"20\")) {\r\n      firstYearTotals += value;\r\n    }\r\n  }\r\n\r\n  chartData.twentytwenty = secondYearTotals;\r\n  chartData.twentyone = firstYearTotals;\r\n\r\n  // console.log(chartData);\r\n  return chartData;\r\n};\r\n\r\n// Starting point of the application\r\nconst init = function () {\r\n  controlGlobalCases();\r\n  controlKenyanCases();\r\n  SearchView.addHandlerSearch(controlSearches);\r\n  controlCOVIDHistory();\r\n};\r\n\r\ninit();\r\n\r\n//todo: Add Inheritance to views and add chart js with worldwide data also fix the search issue\r\n//todo: Find a better way to display chart and include death and revcovered\r\n"],"names":["HMR_HOST","HMR_PORT","HMR_SECURE","HMR_ENV_HASH","module","bundle","HMR_BUNDLE_ID","OVERLAY_ID","OldModule","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","undefined","checkedAssets","acceptedAssets","assetsToAccept","location","protocol","indexOf","hostname","port","parent","isParcelRequire","WebSocket","getHostname","getPort","test","ws","onmessage","event","JSON","parse","type","removeErrorOverlay","assets","filter","asset","envHash","handled","forEach","didAccept","hmrAcceptCheck","root","id","depsByBundle","console","clear","hmrApply","i","length","hmrAcceptRun","window","reload","ansiDiagnostic","diagnostics","ansi","stack","codeframe","error","message","hints","join","overlay","createErrorOverlay","html","document","body","appendChild","onerror","e","onclose","warn","getElementById","remove","log","createElement","errorHTML","diagnostic","map","hint","innerHTML","modules","parents","k","d","dep","Array","isArray","concat","getParents","link","newLink","cloneNode","onload","parentNode","removeChild","setAttribute","getAttribute","split","Date","now","insertBefore","nextSibling","cssTimeout","setTimeout","links","querySelectorAll","href","servedFromHMRServer","RegExp","absolute","origin","updateLink","reloadCSS","deps","Function","output","cached","cache","some","v","cb","assetsToAlsoAccept","apply","$01eabf68314158b70a576e3c80305fc9$export$state","globalCases","kenyanCases","search","query","result","history","cases","deaths","recovered","_data","_parentElement","querySelector","renderGlobalData","this","markup","_generateMarkup","_clear","insertAdjacentHTML","renderSpinner","spinner","el","render","countryInfo","flag","_searchField","getQuery","value","addHandlerSearch","handler","addEventListener","preventDefault","renderError","country","_ctx","getContext","recoveries","_colorGen","Math","floor","random","myChart","Chart","labels","datasets","label","twentytwenty","twentyone","backgroundColor","borderColor","borderWidth","$760c570c0e35e0b3e71397189b6dd75e$var$controlKenyanCases","async","res","fetch","json","ok","Error","status","err","$01eabf68314158b70a576e3c80305fc9$export$getKenyanCases","$760c570c0e35e0b3e71397189b6dd75e$var$controlSearches","alert","$01eabf68314158b70a576e3c80305fc9$export$searchCountryCase","$760c570c0e35e0b3e71397189b6dd75e$var$controlCOVIDHistory","$01eabf68314158b70a576e3c80305fc9$export$getCOVIDHistory","confirmedCases","$760c570c0e35e0b3e71397189b6dd75e$var$calculateTotals","confirmedDeaths","confirmedRecoveries","secondYearTotals","firstYearTotals","chartData","key","Object","entries","endsWith","$01eabf68314158b70a576e3c80305fc9$export$getGlobalCases","$760c570c0e35e0b3e71397189b6dd75e$var$controlGlobalCases"],"version":3,"file":"index.ed2df0a9.js.map","sourceRoot":"/__parcel_source_root/"}